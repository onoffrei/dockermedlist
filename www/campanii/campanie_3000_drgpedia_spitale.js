
m1 = ["centrulbaia@yahoo.com","sanatoriultbc@cristalsoft.ro","aiudspital@yahoo.com, spitalaiud@alba.astral.ro, mcraciun@alba.astral.ro","spitalblaj@yahoo.com","spitalul_sebes@yahoo.com","spital_abrud@clicknet.ro","SPITALULCAMPENI@k.ro","spitalcugir@yahoo.co","spitalom@yahoo.com","spitalzlatna@yahoo.com","spitaltbcaiud@astralnet.ro - administrativ spitaltbcaiud.statistica@astralnet.ro - statistica spitaltbcaiud.medical@astralnet.ro - medical spitaltbcaiud.laborator@astralnet.ro - laborator spitaltbcaiud.dispensar@astralnet.ro - dispensar TBC farmatbcaiud.@astralnet.ro - farmacie","contact@spitalalba.ro","scjaradsecretariat@yahoo.com, dr_prisca@yahoo.com","splipova@rdslink.ro","spitalsebis@artelecom.net","ardelean.g@spitin.ro","spitmatar@rdsar.ro","s.c.m.arad@rdsar.ro","spitalcapalnas@yahoo.com; spital capalnas @gmail.com","spitalmocrea@rdslink.ro","spitaluldezna@yahoo.com; spitaluldezna@k.ro","csrsantana2002@yahoo.com","spitalgurahont@yahoo.com","centrulingrijire_pitesti@yahoo.com","icraciun@zappmobile.ro","spitalul_stefanesti@yahoo.com","pediatrie@artelecom.net, spital.pediatrie@adslexpress.ro","spitalleord@uplink.ro","spitaltbc@rdslink.ro","financiar@spviasului.ro","sfmariapsih@yahoo.com","spitalbradet@yahoo.com","spitaldomnesti@yahoo.com","spiturgag01@yahoo.com","spital.campulung@gmail.com","aprovizionare@smca.ro","spital.costesti.ag@geostar.ro","spitalmioveni@artelecom.net","sp.clpnf@gmail.com","informatii@spitaljudbc.ro","spitaltbc@bacau.astral.ro","informatii@spitaljudbc.ro, relatii_publice@spitaljudbc.ro","spitalmoinesti@bacau.astral.ro","spitalonesti@mic.ro","office.spbuhusi@dns-net.ro","secretariat@spitalulcomanesti.ro","spitalul.judetean@rdsor.ro","spitalbratca@yahoo.com","spitalcforadea@yahoo.com","spitalinfectioase@rdslink.ro","spitalcopiioradea@gmail.com","spneuropsihiatrie@rdsor.ro","spital@spitalogoradea.ro","pneumoftiz@rdsor.ro","spn@rdslink.ro; spnucet@yahoo.com","psihiatrie.stei@yahoo.com","spitalulmarghita@yahoo.com","spitalul_beius@rdslink.ro","spital@salonta.ro","spitaloralesd@zappmobile.ro","sanatoriul@easynet.ro","tbcguranda@yahoo.com","spitaluldecopiibotosani@yahoo.com","office@pneumobt.ro; lefter.v@pneumobt.ro","spitalpsihiatriebt@artelecom.net ; spitalpsihiatriebt@yahoo.com","postmaster@spitalbt-sfgheorghe.ro","spitaldorohoi@gmail.com","lenutanegru@yahoo.com","icavarareanu2002@yahoo.com","spital_mavromati@yahoo.com","lszente@clicknet.ro; sogbt@artelecom.net","spitaltbcbraila@yahoo.com","spbr1@spitalpsihiatriebraila.ro, spbr2@spitalpsihiatriebraila.ro","spit_or_faurei@yahoo.com","oficiu@spitjudbraila.ro, contact@spitjudbraila.ro","a_casaru@yahoo.com; spitajog@yahoo.com","nevroze_predeal@yahoo.com","maternitateabv@rdsbv.ro","sbibv@rdsbv.ro; ancamax@gmail.com","spitalcopiibrasov@hotmail.com; spitalcopiibrasov@go.ro","neurobv@xnet.ro","spitalulcodlea@yahoo.com","secretariat@spitalulfagaras.ro","smsacele@gmail.com","inms_romania@yahoo.com","spitaliomc@yahoo.com","secretariat@centru-reumatologie.ro administrativ@centru-reumatologie.ro farmacie@centru-reumatologie.ro contabilitate@centru-reumatologie.ro","info@recuperarecopii.ro","office@deltaco.ro","fundeni@cmb.ro","ibcardio@gmail.com","statistica@ifacforl.ro, secretariat@ifacforl.ro, sugestii@ifacforl.ro","nasta@mariusnasta.ro, secretariat@marius-nasta.ro","secretariat@mateibals.ro","office@cantacuzino.ro","info@vbabes.ro","contact@paulescu.ro","contact@parhon.ro","anaaslanmanager@yahoo.com; geriatrie@ana-aslan.ro","hemtransro@b.astral.ro","ibcv.cp@hotmail.com; aprovizionare.ibcv@gmail.com","inrmfb@gmail.ro","inmca_bucuresti@yahoo.com","office@iob.ro","coltea@coltea.rdsnet.ro","office @ spitalulbabes.ro","spital_chirurgie_omf @itcnet.ro","spital.gomoiu@gmail.com","orto@foisor.ro","alex_obregia@yahoo.com","rsn@bagdasar-arseni.ro; directie@bagdasar-arseni.ro","spital@urgentafloreasca.ro","alexandrescugrigore@yahoo.com;coriolanulmeanu@yahoo.com; toxapel@sccc-ga.ro","spital@mscurie.ro; pediatrie@mscurie.ro; chirugie@mscurie.ro; orl@mscurie.ro; ati@mscurie.ro; oncologie@mscurie.ro; office@mscurie.ro; aprovizionare@mscurie.ro","scusfpant@yahoo.com","chirurgieplastica@yahoo.com","oftalmologie@gmail.com","thburghele@k.ro","filantropia_2006@yahoo.com","spitalul_angelescu@yahoo.com","sfluca@artelecom.net","spitalul.sfantul.stefan@b.astral.ro","constantingorgos@yahoo.com; secretariat_cgorgos@yahoo.com","spital.gerota@mai.gov.ro","secretariat@suub.ro","spitalvintilavoda@k.ro","spitsmeeni@buzau.ro","hsapoca@buzau.ro","e-mail: office@spitalulbuzau.ro, Relatii cu publicul - pr@spitalulbuzau.ro, sesizari@spitalulbuzau.ro","spitalrms@clicknet.ro","spitnehoiu@yahoo.com, spitnehoiu@clicknet.ro","pneumocalarasi@nex.ro","remus_c2002@yahoo.com; spoltenita@walla.com","spital_budesti@yahoo.com","spitallehliu@xnet.ro; spitallehliu@yahoo.com","secretariat@scj-cj.rdscj.ro","dan.sanpetreanu@renaltransplant.ro","office@institutulinimii.ro","office@iocn.ro","scu@scucj.ro","infectioasecj@yahoo.com","it@spitcocluj.ro","spital_pneumo@yahoo.com","recuperarecj@yahoo.com","office@scmcj.ro manager@scmcj.ro directormedical@scmcj.ro directorfinanciar@scmcj.ro runos@scmcj.ro contabilitate@scmcj.ro ","spitalborsa@yahoo.com","spital@smucluj.ro","spitalct@rdslink.ro  spitalct@yahoo.com","spital_dej@yahoo.com; spitaldej@xnet.ro","smgs@artelecom.net","spitalmunicipalturda@yahoo.com","spitalul.huedin@cluj.astral.ro, runoshuedin@yahoo.com","scju_secretariat@yahoo.com, secretariat@spitalulconstanta.ro","csbaneasa@gmail.com","office@balnear.net","office@sbtghiol.ro","spunivcf_cta@yahoo.com, spunivcf_cta@hotmail.com","spit.inf.1@rdsct.ro","pneumoconstanta@infomedic.ro, contabilitate_tbc@yahoo.com","spital.agigea@gmail.com","office@spitalul-mangalia.ro","spitalulmed@artelecom.net","spitalsecretariat@yahoo.com","spital_harsova@digital-net.ro","cpnmvalcele@artelcom.net","cardiologie@artelecom.net","spital@spitaltgsecuiesc.ro ","elicit@spitbar.ro","spital@spitcv.ro","cmrngo@zappmobile.ro","sptadmin@spitaldb.ro","mdealuhost@minisat.ro","spitalgaesti@yahoo.com","spitalul_municipal_moreni@yahoo.com","spitaltitu@yahoo.com","scjuc.craiova@gmail.com Manager: scjuc.general.manager@gmail.com  Director Adjunct Medical: scjuc.medical1.manager@gmail.com  Director Financiar-Contabil: scjuc.accounting.manager@gmail.com  Director de Ingrijiri: scjuc.nursing.manager@gmail.com  Serviciul personal-salarizare: scjuc.srunos@gmail.com  Biroul tehnic: scjuc.tehnic@gmail.com  Cercetare â€“ dezvoltare: scjuc.grant@gmail.com  Informatica: scjuc.it@gmail.com  Statistica: scjuc.statistica@gmail.com  Farmacie: scjuc.farmacie@gmail.com  Aprovizionare: scjuc.aprovizionare@gmail.com  ","filantropiacr@hotmail.com","vbabes@rdscv.ro, conta_vbabes_cv@rdscv.ro, administrativ_vbabes_cv@rdscv.ro, secretariat_vbabes_cv@rdscv.ro, farmacie_vbabes_cv@rdscv.ro","neuropsihiatrie2002@yahoo.com neuropsihiatrie@hotmail.com farmaciepsihiatrie@gmail.com farmacieneurologie@gmail.com ","smu_craiova@yahoo.com","spitalul_filiasi@yahoo.com&nbsp;","spitalcalafat@gmail.com","mdj_ro@yahoo.com","maternitate@upcbiz.ro, maternitate@maternitategl.ro","spurgcopgl@mail.com","spitalul3@gmail.com","spitalultbc@clicknet.ro","administrativ@spitalpsihiatrie-galati.ro elisabeta_doamna@yahoo.com","anton_cincu2006@yahoo.com","spitaltgbujor@yahoo.com","spitalul_singureni@yahoo.ro","spitalizvoru@yahoo.com; spizvoru@yahoo.com","andreia220@hotmail.com","spitgrlic@bvnet.ro; spitgrlic@yahoo.com","contact@spitalulbolintin.ro,spitalbolintinspitalbolintinThis e-mail address is being protected from spambots. You need JavaScript enabled to view it. ","office@spitaldobrita.ro","office@spitalgorj.ro,  bcatgjiu@intergorj.ro","secretariat.odorhei@gmail.com, hospital.odorhei@gmail.com ","spitalultulghes@yahoo.com","secretariat@spitalmciuc.ro","secretariat@spitaltoplita.ro","spjdeva@deva.rdsnet.ro","smsecretariat@rdslink.ro","relpubl@cjashd.ro","manager@spitalgeneralcfsimeria.ro directormedical@spitalgeneralcfsimeria.ro directoreconomic@spitalgeneralcfsimeria.ro pr@spitalgeneralcfsimeria.ro achizitii@spitalgeneralcfsimeria.ro juridic@spitalgeneralcfsimeria.ro audit@spitalgeneralcfsimeria.ro contabilitate@spitalgeneralcfsimeria.ro ru@spitalgeneralcfsimeria.ro statistica@spitalgeneralcfsimeria.ro secretariat@spitalgeneralcfsimeria.ro spitalcf@rdslink.ro ","sanatoriulb@rdslink.ro; sanatoriu.brad@comser.ro","info@sanatoriugeoagiu.ro","spitalzam@rdslink.ro","spital.brad@clicknet.ro","spolupeni@yahoo.com; ","spital@spitmunor.ro","florinserengau@yahoo.com","office@spitalslobozia.ro","spitalfetesti@artelecom.net; spitalfetesti@yahoo.com","12345@artelecom.net; smurziceni@gmail.com","spitaltandarei@artelecom.net","sp_spiridon@hih.ro, sp.spiridon.financiar@gmail.com, spiridon_resumane@yahoo.com ","maternitatecv@iasi.rdsmail.ro, sp_cuzavoda@hih.ro","elenadoamna@adslexpress.ro","sbc_iasi@mail.dntis.ro manager@infectioase.ro administrativ@infectioase.ro informatizare@infectioase.ro ","traian@mihaescu.eu","sp_recuperare@hih.ro, scr_iasi2004@yahoo.com","sp_urgente_iasi@yahoo.com","secretariat@spitalulparhoniasi.ro","sp_sfmaria_iasi@yahoo.com","spitalcf_pascani@rdslink.ro","smp@rdslink.ro","spitalbalaceanca@yahoo.com; aura_istrate11@yahoo.com","directiune@spitaljbm.ro; medir@spitaljbm.ro; office@spitaljbm.ro","spital@spitalbaiasprie.ro","spital_borsa@yahoo.com","sptbc@sintec.ro","spitalcavnic1@clicknet.ro","spitalsighet@zifer.ro","secretariat@spitaltglapus.ro","spviseu@spitalviseu.ro","spitalcfrdrobeta@artelecom.net","office@spitalulorsova.ro","sporba@rdslink.ro","spitalstrehaia@yahoo.com","spitalulvinju@rdslink.ro; spitalulvinjumare@yahoo.com","secretariat: secretariat@spitaljudeteanmures.ro Birou IT: birouit@spitaljudeteanmures.ro ","secretariat@spitalreghin.ro, administrativ@spitalreghin.ro, runos@spitalreghin.ro, statistica_reghin@vesatel.ro, laboratorreghin@vesatel.ro ","spmt@tvas.ro, spmtar@yahoo.com, farmacia109@yahoo.com, btsorin@yahoo.com","spital_runos@teleson.ro","spludus@ludusnet.ro","sjneamt@sant.ro","vero@artelecom.net","office@spitalulbisericani.ro","secretariat_spital@roman.rdsmail.ro","spitm@artelecom.net","spital_tgneamt@yahoo.com","spj@rdslink.ro","smcaracal@gmail.com","spitalpnf@gmail.com","office@spitalpnf.ro; spitalpnf@yahoo.com","ssg@rdslink.ro","spitalulbals@yahoo.com, contact@spitalulbals.ro","spitalcorabia@yahoo.com","secretariat.sp.mun.campina@upcmail.ro","secretariat@spitbinfectioasepl.ro, achizitii@spitbinfectioasepl.ro","manager@spitalbreaza.ro, administrativ@spitalbreaza.ro, spital.breaza@clicknet.ro","spitalazuga@yahoo.com","spitalpsihiatrie@clicknet.ro","secretariat@spitalcfploiesti.ro, spcfpl@yahoo.com","secretariat@sjup.ro, administrativ@sjup.ro, aprovizionare@sjup.ro, laborator@laborator.sjup.ro, oficiu.juridic@sjup.ro, financiar@sjup.ro, ssmi@sjup.ro","sogpl@adslexpress.ro","manager@spitalzalau.ro , secretariat@spitalzalau.ro ","spitalcehu @yahoo.fr","spitalcarei@zappmobile.ro; spitalst@zappmobile.ro","tbc_sm@yahoo.com","sefoficiuc@spitalsm.p5net.ro","scjsib@yahoo.com; info@scjs.ro","secretariat@spitalulmedias.ro, info@spitalulmedias.ro","pediatrie_sibiu@yahoo.com; secretariat@pediatriesibiu.ro","spitaltbcsibiu@clicknet.ro, admin@spital-tbc.ro, spitaltbcsibiu@yahoo.com","office@medicina-psihiatrie.ro","smus@rdslink.ro","office@spital-agnita.ro","socisnadie@rdslink.ro","secretariat@smcm.suceava.astral.ro","spitalul_falticeni@suceava.astral.ro","spitalradauti@yahoo.com ","Secretariat: office@spcm.ro Conducere: manager@spcm.ro Contabilitate: contabilitate@spcm.ro Administrativ: administrativ@spcm.ro Compartiment IT: it@spcm.ro Registratura / internari: statistica@spcm.ro","psihiatriesiret@yahoo.com","statistica_spital_sv@clicknet.ro; spital_sv@clicknet.ro","financiargh@gmail.com spital_gh@yahoo.com statisticagh@gmail.com","orasenescsiret@yahoo.com","pneumofi@evstar.ro, pnfrosiori@yahoo.com","contact@spitalbalaci.ro","sp_poro_inc@yahoo.com","officesja@evstar.ro","judetean@hosptm.ro","smtm@rdstm.ro","spitaljimbolia@artelecom.net","municipal.lugoj@smlugoj.ro","office@cardiologie.ro","spital@spitaluniversitarcftimisoara.ro","conta@spitalul-vbabes-tm.ro; dirmed@spitalul-vbabes-tm.ro; atiari@spitalul-vbabes-tm.ro","secretariat@spitalcopiitm.ro; aprovizionare@spitalcopiitm.ro","sanatatefg@artelecom.net","spitalgataia.tm@gmail.com","secretariat@spitaljebel.ro  ","spitalsannicolaumare@artelecom.net","spitalsulina@yahoo.com","spitaltl@x3m.ro","spitalbabadag@yahoo.com","somacin2002@yahoo.fr","sptichilesti@yahoo.com","spitalul_valcea@yahoo.com","ogvl@iplus.ro","spitaldrag@yahoo.com","spitalulbrezoi@gmail.com","spitalul_horezu@yahoo.com","anasta_spital@yahoo.com","spitalul_dragoesti@yahoo.com","sjuvs@easynet.ro; spitjud@yahoo.com","contact@spital-barlad.ro","spitaluldecopiibarlad@gmail.com","zaraclaudiu@yahoo.com","spital@spitaldumbraveni.ro"]
function showResult(){
	var respttext = '';
	for (var i = 0; i < m1.length; i++){
		if (typeof(m1[i]) != 'undefined') respttext += '' +  m1[i] + '; '
		if ((i % 30) == 0) respttext += '\r '
	}
	return respttext
}
showResult()

maillist = []
function scrap_judet(pjudet){
	return new Promise(async (resolve,reject)=>{
		//console.log('scrap judet started:',pjudet.querySelector('a').innerText)
		cmp_localitati = pjudet.querySelectorAll('ul>li')
		cmp_localitati_length = cmp_localitati.length
		loop_locstart = 0
		loop_locstop = cmp_localitati_length
		for (var i = loop_locstart; i < loop_locstop; i++){
			var href = cmp_localitati[i].querySelector('a').href
			await hrefparse(href)
		}
		resolve()
	})
}
function nextpage(url,pagina){
	return new Promise((resolve,reject)=>{
		try{
			var ret = {success:false}
			var urlnext = setURLParameter({name:'pagina',value:pagina,url:url})
			var detaliiwindow = window.open(urlnext)
			detaliiwindow.addEventListener('DOMContentLoaded', (event)=>{
				try{
					detailparse(detaliiwindow)
					ret.success = true
					detaliiwindow.close();
					resolve(ret)
				}catch (e) {
					console.log('e2',e)
					detaliiwindow.close();resolve(ret)
				}
			})
		}catch (e) {
			console.log('e1',e)
			detaliiwindow.close();resolve(ret)
		}
	})

}
function hrefparse(url){
	return new Promise((resolve,reject)=>{
		try{
			var ret = {success:false,numpages:1}
			var detaliiwindow = window.open(url)
			detaliiwindow.addEventListener('DOMContentLoaded', async (event)=>{
				try{
					var numpages = detaliiwindow.document.querySelector('.pagination_container>a:last-child')
					if (numpages != null){
						ret.numpages = parseInt(getURLParameter({name:'pagina',url:numpages}))
					}
					detailparse(detaliiwindow)
					//console.log(ret.numpages)
					if (ret.numpages > 1){
						for (var pagina = 2; pagina <=ret.numpages; pagina++ ){
							await nextpage(url,pagina)
						}
					}
					/*
					var detaliimaila = detaliiwindow.document.querySelector('a[href*=mailto]')
					//console.log(detaliimaila)
					if (detaliimaila == null) {detaliiwindow.close();resolve(ret)}
					ret.mail = detaliimaila.href.replace('mailto:','')
					//console.log(detaliimaila.href)
					*/
					ret.success = true
					detaliiwindow.close();
					resolve(ret)
				}catch (e) {
					console.log('e2',e)
					detaliiwindow.close();resolve(ret)
				}
			})
		}catch (e) {
			console.log('e1',e)
			detaliiwindow.close();resolve(ret)
		}
	})
}
function detailparse(pwindow){	
		var melement = pwindow.document.querySelector('.ss_email')
		if (melement !=  null){
			var email = pwindow.document.querySelector('.ss_email').nextElementSibling.innerHTML
			console.log(email)
			if (email.indexOf('@') != -1){
				//console.log(email)
				if (!maillist.includes(email)){
					maillist[maillist.length] = email
				}
			}
		} 
}
setURLParameter = function(param) {
	//var iparam					= {paramName, paramValue, url}
	//if paramValue == null -> remove from query
	var iparam					= {name:'', value:'', url:window.location.href}
	jQuery.extend(true,iparam,param)
	if (iparam.url.indexOf(iparam.name + "=") >= 0){
		var prefix = iparam.url.substring(0, iparam.url.indexOf(iparam.name));
		var suffix = iparam.url.substring(iparam.url.indexOf(iparam.name));
		suffix = suffix.substring(suffix.indexOf("=") + 1);
		suffix = (suffix.indexOf("&") >= 0) ? suffix.substring(suffix.indexOf("&")) : "";
		if (iparam.value == null){
			iparam.url = prefix.substring(0,prefix.length - 1) + suffix;				
		}else{
			iparam.url = prefix + iparam.name + "=" + encodeURIComponent(iparam.value) + suffix;				
		}
	}else{
		if (iparam.value != null){
			if (iparam.url.indexOf("?") < 0)
				iparam.url += "?" + iparam.name + "=" + encodeURIComponent(iparam.value);
			else
				iparam.url += "&" + iparam.name + "=" + encodeURIComponent(iparam.value);
		}
	}
	return iparam.url
}
getURLParameter = function(param) {
	//[url,name]
	var iparam					= {
		url:window.location, 
		name:''
	}
	jQuery.extend(true,iparam,param)
	return decodeURIComponent((new RegExp('[?|&]' + iparam.name + '=' + '([^&;]+?)(&|#|;|$)').exec(iparam.url)||[,""])[1].replace(/\+/g, '%20'))||null
}
cmp_judete = document.querySelectorAll('ul.menu>li>ul>li')
cmp_judete_length = cmp_judete.length
loop_judstart = 0//20
loop_judstop = cmp_judete_length
for (var i = loop_judstart; i < loop_judstop; i++){
	await scrap_judet(cmp_judete[i])
}